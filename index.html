<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Redirecionando para a loja...</title>

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        Roboto, Helvetica, Arial, sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #0f172a;
      color: #e5e7eb;
      padding: 16px;
    }

    .card {
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.3);
      border-radius: 16px;
      padding: 24px 20px;
      max-width: 420px;
      width: 100%;
      text-align: center;
      box-shadow: 0 20px 45px rgba(0, 0, 0, 0.35);
    }

    h1 {
      font-size: 1.35rem;
      margin-bottom: 8px;
    }

    p {
      font-size: 0.95rem;
      margin-bottom: 8px;
      color: #cbd5f5;
    }

    .small {
      font-size: 0.8rem;
      opacity: 0.8;
    }

    .os-name {
      font-weight: 600;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      margin-top: 16px;
      padding: 10px 18px;
      border-radius: 999px;
      border: none;
      background: #22c55e;
      color: #022c22;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      text-decoration: none;
      transition: transform 0.12s ease, box-shadow 0.12s ease,
        background 0.12s ease;
      box-shadow: 0 10px 25px rgba(34, 197, 94, 0.35);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(34, 197, 94, 0.45);
      background: #16a34a;
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 6px 15px rgba(34, 197, 94, 0.35);
    }

    .status {
      margin-top: 8px;
      font-size: 0.85rem;
      opacity: 0.9;
    }

    .status-error {
      color: #fca5a5;
    }

    .status-ok {
      color: #6ee7b7;
    }

    @media (prefers-reduced-motion: reduce) {
      * {
        scroll-behavior: auto !important;
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
      }
    }
  </style>
</head>
<body>
  <div class="card">
    <h1>Redirecionando para a loja...</h1>
    <p id="message">Detectando o sistema operacional do seu dispositivo.</p>
    <p id="status" class="status small">Isso normalmente leva menos de 1 segundo.</p>

    <!-- Botão de fallback, caso o redirecionamento automático falhe -->
    <a id="fallbackButton" class="btn" href="#" style="display: none;" rel="noopener noreferrer">
      Abrir a loja manualmente
    </a>
  </div>

  <script>
    (function () {
      "use strict";

      // SUBSTITUA ESTES LINKS PELOS LINKS REAIS DO SEU APP:
      const ANDROID_APP_URL =
        "https://play.google.com/store/apps/details?id=com.android.chrome&pcampaignid=web_share";
      const IOS_APP_URL =
        "https://apps.apple.com/br/app/google-chrome/id535886823";

      const messageEl = document.getElementById("message");
      const statusEl = document.getElementById("status");
      const fallbackButton = document.getElementById("fallbackButton");

      function detectarSO() {
        const userAgent = navigator.userAgent || navigator.vendor || window.opera;

        // iOS (incluindo iPadOS novo que aparece como Mac, mas é touch)
        const isIOS =
          /iPad|iPhone|iPod/.test(userAgent) ||
          (navigator.platform === "MacIntel" && navigator.maxTouchPoints > 1);

        if (isIOS) {
          return "iOS";
        }

        // Android
        if (/android/i.test(userAgent)) {
          return "Android";
        }

        return "Outro";
      }

      function redirecionar() {
        const so = detectarSO();
        let urlLoja = null;

        if (so === "Android") {
          urlLoja = ANDROID_APP_URL;
          messageEl.innerHTML =
            'Detectamos um dispositivo <span class="os-name">Android</span>.';
        } else if (so === "iOS") {
          urlLoja = IOS_APP_URL;
          messageEl.innerHTML =
            'Detectamos um dispositivo <span class="os-name">iOS</span>.';
        } else {
          messageEl.innerHTML =
            "Não foi possível identificar um dispositivo Android ou iOS.";
          statusEl.textContent =
            "Acesse esta página a partir de um celular Android ou iOS para ser redirecionado.";
          statusEl.classList.add("status-error");
          return;
        }

        if (!urlLoja) {
          statusEl.textContent = "Nenhum link de loja configurado.";
          statusEl.classList.add("status-error");
          return;
        }

        // Atualiza o botão de fallback
        fallbackButton.href = urlLoja;
        fallbackButton.style.display = "inline-flex";

        statusEl.textContent = "Redirecionando automaticamente...";
        statusEl.classList.remove("status-error");
        statusEl.classList.add("status-ok");

        // Pequeno delay só para o usuário ver a mensagem
        setTimeout(function () {
          window.location.href = urlLoja;
        }, 800);
      }

      // Inicia assim que o DOM estiver pronto
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", redirecionar);
      } else {
        redirecionar();
      }
    })();
  </script>
</body>
</html>
